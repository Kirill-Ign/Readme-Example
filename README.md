# Auth Service

## Название и назначение сервиса

**Auth Service** — сервис авторизации, отвечающий за регистрацию, аутентификацию и управление правами доступа пользователей.

**Роль в системе:**
- Обеспечивает безопасный доступ к микросервисам через OAuth2.
- Управляет учётными записями пользователей, их ролями и правами доступа.
- Выдаёт и проверяет OAuth2-токены с использованием Laravel Passport.
- Интегрируется с API Gateway.

**Основные функции:**
- Регистрация новых пользователей.
- Аутентификация и получение токенов доступа.
- Обновление и отзыв токенов.
- Управление профилем и ролями пользователей.

## Архитектура и зависимости

### Технологии и фреймворки
- **PHP 8.2**
- **Laravel 9.0**
- **Laravel Passport** – для реализации OAuth2
- **Docker** и **Docker Compose** – для контейнеризации и локального развёртывания
- **Redis** – для кеширования сессий и хранения временных данных
- **Kafka** – для обработки асинхронных событий

### Взаимодействие с другими микросервисами
- **API Gateway:** принимает запросы от пользователей и маршрутизирует их к Auth Service.

### Используемые внешние сервисы
- **Redis:** используется для кеширования и хранения сессионных данных.
- **Kafka:** применяется для асинхронной обработки событий и логирования.

## Способы запуска сервиса

### Локальный запуск через Docker

1. **Требования:**
   - Установлены [Docker](https://docs.docker.com/get-docker/) и [Docker Compose](https://docs.docker.com/compose/install/).

2. **Установка и настройка:**
   - Клонируйте репозиторий:
     ```bash
     git clone https://github.com/Kirill-Ign/Readme-Example.git
     cd Readme-Example
     ```
   - Скопируйте файл `.env.example` в `.env` и настройте переменные окружения.

3. **Запуск:**
   ```bash
   docker-compose up -d
   ```
   Сервис будет доступен по адресу: [http://localhost:8000](http://localhost:8000)

### Запуск без Docker

1. **Установка зависимостей:**
   ```bash
   composer install
   ```
2. **Настройка окружения:**
   - Скопируйте `.env.example` в `.env` и настройте необходимые переменные.
3. **Генерация ключа приложения:**
   ```bash
   php artisan key:generate
   ```
4. **Запуск локального сервера:**
   ```bash
   php artisan serve
   ```
   Сервис будет доступен по адресу: [http://localhost:8000](http://localhost:8000)

## API документация

### OpenAPI / Swagger
- Документация доступна по адресу: [http://localhost:8000/api-docs](http://localhost:8000/api-docs)

### Основные эндпоинты:
- **POST /api/v1/auth/register**  
  **Описание:** Регистрирует нового пользователя.  
  **Параметры:** email, password, name, и др.
  
- **POST /api/v1/auth/login**  
  **Описание:** Выполняет аутентификацию пользователя по OAuth2 с помощью Laravel Passport и возвращает токен доступа.  
  **Параметры:** email, password.
  
- **POST /api/v1/auth/logout**  
  **Описание:** Инвалидирует текущий токен доступа.
  
- **GET /api/v1/auth/me**  
  **Описание:** Возвращает информацию об аутентифицированном пользователе.

- **POST /api/v1/auth/refresh**  
  **Описание:** Обновляет текущий токен доступа.

## Тестирование

### Запуск тестов
```bash
php artisan test
```

## Контакты и поддержка

- **Команда:** Example Team (Дмитрий Дмитриевич, Максим Максимович, Кирилл Кириллович)
- **Telegram:** @example
- **Email:** example@example.com

